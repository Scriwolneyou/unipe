<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Info</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="./static/css/style.css">
</head>

<body>
    <div id="header">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/76/PlayStation_2_logo.svg/2560px-PlayStation_2_logo.svg.png" class="w-200">

        <div id="menu">
            <a href="./index.html" class="dec azul f-size">Home</a>
            <a href="./console.html" class="dec roxo f-size">Console</a>
            <a href="./history.html" class="dec vermelho f-size">History</a>
            <a href="./contacts.html" class="dec verde f-size">Contacts</a>
        </div>
    </div>

    <div class="m-left-9 w-83">
        <div class="d-flex p-top-3">
            <img id="capa" src="" class="w-200 h-280 b-shadow-x">

            <div class="c-white m-left">
                <h2 id="nome"></h2>

                <div class="b-color p-2">
                    <p id="sinopse"></p>
                </div>
            </div>
        </div>
        <hr>
        <div class="c-white">
            <h2>Gameplay Trailer</h2>

            <div class="d-flex">
                <p>
                    <iframe id="url_trailer" width="640" height="360" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                </p>

                <div class="b-color m-left p-2 trailer-txt">
                    <p id="trailer_txt" class="m-left"></p>
                <div>
            </div>
        </div>
    </div>
</body>

<script>
    fetch('./static/data/games.json').then(response => response.json()).then(data => {
            const url = window.location.search;
            const parametros = new URLSearchParams(url)
            const index = parametros.get("id")

            var dadosJogo = data[index];
            console.log(dadosJogo);
            populate(dadosJogo)
        })
        .catch(error => {
            console.log('Ocorreu um erro:', error);
        });

    function populate(dadosJogo){
        document.getElementById("capa").src = dadosJogo["capa"]
        document.getElementById("nome").textContent = dadosJogo["nome"]
        document.getElementById("sinopse").innerHTML = dadosJogo["sinopse"]
        document.getElementById("url_trailer").src = dadosJogo["url_trailer"]
        document.getElementById("trailer_txt").textContent = dadosJogo["trailer_txt"]
    }
</script>

</html>